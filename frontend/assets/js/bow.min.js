function preprocessText(t){return t.toLowerCase().replace(/[^a-z\s]/g,"").split(/\s+/)}function createBoW(t){const a=new Set,e=[];t.forEach((t=>{preprocessText(t).forEach((t=>a.add(t)))}));const r=Array.from(a);return t.forEach((t=>{const a=preprocessText(t),s={};a.forEach((t=>{s[t]?s[t]++:s[t]=1}));const n=r.map((t=>s[t]||0));e.push(n)})),{vocabulary:r,bowData:e}}function updateVisualization(){const t=document.getElementById("textInput").value.split("\n").filter((t=>""!==t.trim()));if(0===t.length)return void alert("Please enter some text.");const{vocabulary:a,bowData:e}=createBoW(t),r=a.map(((t,a)=>({word:t,frequency:e.reduce(((t,e)=>t+e[a]),0)})));r.sort(((t,a)=>a.frequency-t.frequency));const s=20,n=20,c=30,o=40,l=800-o-n,d=400-s-c,i=d3.scaleBand().domain(r.map((t=>t.word))).range([0,l]).padding(.1),p=d3.scaleLinear().domain([0,d3.max(r,(t=>t.frequency))]).nice().range([d,0]);d3.select("#chart").selectAll("*").remove();const u=d3.select("#chart").append("svg").attr("width",l+o+n).attr("height",d+s+c).append("g").attr("transform",`translate(${o},${s})`);u.selectAll(".bar").data(r).enter().append("rect").attr("class","bar").attr("x",(t=>i(t.word))).attr("y",(t=>p(t.frequency))).attr("width",i.bandwidth()).attr("height",(t=>d-p(t.frequency))),u.append("g").attr("class","axis x-axis").attr("transform",`translate(0,${d})`).call(d3.axisBottom(i)).selectAll("text").attr("class","axis-label").attr("y",0).attr("x",9).attr("dy",".35em").attr("transform","rotate(45)").style("text-anchor","start"),u.append("g").attr("class","axis y-axis").call(d3.axisLeft(p))}